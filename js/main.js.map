{"version":3,"file":"main.js","sources":["../../src/js/ui-elements/decimal-number.js","../../src/js/ui-elements/input-action.js","../../src/js/ui-elements/select.js","../../src/js/ui-elements/tooltip.js","../../src/js/ui-elements/counter.js","../../src/js/ui-elements/input-mask.js","../../src/js/form.js","../../src/js/popup.js"],"sourcesContent":["const numberWithCommas = function (x) {\n\treturn x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n};\nwindow.numberWithCommas = numberWithCommas;\n","$(function () {\n\tconst $input = $('.js-input');\n\n\t$input.focus(function(){\n\t\t$(this).parent('.form-field').addClass('form-field--focused');\n\t\t$(this).parent('.form-field').removeClass('form-field--error');\n\t});\n\n\t$input.blur(function(){\n\t\tif ($(this).val() === ''){\n\t\t\t$(this).parent('.form-field').removeClass('form-field--focused');\n\t\t}\n\t});\n\n\t// Set focused class if have value\n\tfunction setInputFocused() {\n\t\t$input.each(function () {\n\t\t\tif ($(this).val() === ''){\n\t\t\t\t$(this).parent('.form-field').removeClass('form-field--focused');\n\t\t\t} else {\n\t\t\t\t$(this).parent('.form-field').addClass('form-field--focused');\n\t\t\t}\n\t\t});\n\t}\n\n\tsetInputFocused();\n});\n","$(function () {\n\tconst $select = $('.js-select');\n\tconst $selectInput = $('.js-select-input');\n\tconst $selectFilter = $('.js-select-filter');\n\n\t$select.select2({\n\t\tdropdownAutoWidth : true,\n\t\tcontainerCssClass: 'select',\n\t\tdropdownCssClass: 'no-input'\n\t});\n\n\t$selectInput.select2({\n\t\tdropdownAutoWidth : true,\n\t\tcontainerCssClass: 'select',\n\t\tdropdownCssClass: 'input',\n\t\ttags: true\n\t});\n\n\t$selectFilter.select2({\n\t\tcontainerCssClass: 'filter',\n\t\tdropdownCssClass: 'no-input filter-dropdown'\n\t});\n\n\t// declaring for global visibility\n\twindow.$select = $select;\n\twindow.$selectInput = $selectInput;\n\twindow.$selectFilter = $selectFilter;\n});\n","$(function () {\n\t$('.js-tooltip').tooltipster({\n\t\ttheme: ['tooltipster-shadow', 'tooltipster-shadow-customized'],\n\t\tmaxWidth: 300,\n\t\tdistance: 5,\n\t\tdebug: true\n\t});\n});\n","$(function () {\n\t$('.js-add').click(function() {\n\t\tconst $input = $(this).prev().find('.js-counter-input');\n\t\tlet currentValue = parseInt($input.val());\n\t\t$input.attr('value',currentValue + 1);\n\t\t$(this).prev().find('.js-counter-text').text(currentValue + 1);\n\t});\n\n\t$('.js-sub').click(function() {\n\t\tconst $input = $(this).next().find('.js-counter-input');\n\t\tlet currentValue = parseInt($input.val());\n\t\tif (currentValue >= 1) {\n\t\t\t$input.attr('value',currentValue - 1);\n\t\t\t$(this).next().find('.js-counter-text').text(currentValue - 1);\n\t\t}\n\t});\n});\n","$(function () {\n\t$('.js-input-mask').each(function () {\n\t\tconst mask = $(this).data('mask');\n\n\t\tnew Inputmask(\n\t\t\t{\n\t\t\t\tmask: mask,\n\t\t\t\tplaceholder: '_'\n\t\t\t}\n\t\t\t).mask(this);\n\t});\n});\n","$(function () {\n\n// Ввод только цифр\n\t$('.js-number').keypress(function(e){\n\t\tlet charCode = (e.which) ? e.which : e.keyCode;\n\t\tif (charCode > 31 && (charCode < 48 || charCode > 57)) {\n\t\t  return false;\n\t\t}\n\t});\n\t\n// Деактивация кнопки отправки формы при снятии галочки с чекбокса согласия\n\t$('.js-agree').change(function () {\n\t\tlet $this = $(this);\n\t\tlet btn = $this.closest('.js-form').find('.submit');\n\t\tif ($this.is(':checked')) {\n\t\t\tbtn.removeAttr(\"disabled\");\n\t\t} else {\n\t\t\tbtn.attr(\"disabled\", true);\n\t\t}\n\t});\n\n\n// Валидация формы\n\tlet form = $('.js-form');\n\n\tform.each(function(){\n\t\tlet thisForm = $(this);\n\t\tlet url = thisForm.attr('action');\n\n\t\tthisForm.validate({\n\t\t\tfocusInvalid: false,\n\t\t\thighlight: function(element) {\n              $(element).closest(\".form-field\").addClass('form-field--error');\t\t      \n            },\n            unhighlight: function(element) {\n              $(element).closest(\".form-field\").removeClass('form-field--error');\t\t      \n            },\n\t\t\tsubmitHandler: function(form, event){\n\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlet data = new FormData(),\n\t\t\t\t\t\tformParams = thisForm.serializeArray();\n\n\t\t\t\t\t$.each(thisForm.find('.js-input-file'), function(i, tag) {\n\t\t\t\t\t\t$.each($(tag)[0].files, function(i, file) {\n\t\t\t\t\t\t\tdata.append(tag.name, file);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t$.each(formParams, function(i, val) {\n\t\t\t\t\t\tdata.append(val.name, val.value);\n\t\t\t\t\t});\n\n\t\t\t\t\tdata.append('key', 'value');\n\n\t\t\t\t/* это нужно будет вывеcти после успешной отправки формы, \n\t\t\t\tэто здесь только для демонстарации выхода попапа */\n\n\t\t\t\t\tthisForm.find('button').prop('disabled', false);\n\t\t\t\t\tthisForm[0].reset();\n\t\t\t\t\t$('.popup').removeClass('is-show');\n\t\t\t\t\t$('#popup-thank').addClass('is-show');\n\n\t\t\t\t\tlet $select2 = $('.js-select');\n\t\t\t\t\tif ($select2.length) {\n\t\t\t\t\t\t$select2.each(function () {\n\t\t\t\t\t\t\t$(this).val('').trigger('change');\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t/* ******* */\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: thisForm[0].action,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false,\n\t\t\t\t\tdata: data,\n\t\t\t\t\tbeforeSend: function (data) {\n\t\t\t\t\t\tthisForm.find('button').attr('disabled', 'disabled');\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (data['error']) {\n\t\t\t\t\t\t\tconsole.log('error');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tthisForm.find('button').prop('disabled', false);\n\t\t\t\t\t\t\t\tthisForm[0].reset();\n\t\t\t\t\t\t\t\t$('.popup').removeClass('is-show');\n\t\t\t\t\t\t\t\t$('#popup-thank').addClass('is-show');\n\n\t\t\t\t\t\t\t\tlet $select2 = $('.js-select');\n\t\t\t\t\t\t\t\tif ($select2.length) {\n\t\t\t\t\t\t\t\t\t$select2.each(function () {\n\t\t\t\t\t\t\t\t\t\t$(this).val('').trigger('change');\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function (xhr, ajaxOptions, thrownError) {\n\t\t\t\t\t\tconsole.log(xhr.status);\n\t\t\t\t\t\tconsole.log(thrownError);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t})\n\n\t$('#popup-thank').on('click', function(){\n\t\t$(this).removeClass('is-show');\n\t})\n\n});\n\n","$(function () {\n\tlet $popup = $('.js-popup');\n\tlet $popupCloseBtn = $('.js-popup-close');\n\tlet lastOpenedPopup = null;\n\tlet scrollPosition;\n\n\tif (location.hash !== '') {\n\t\t$(`.js-popup[data-block='${location.hash.substr(1)}']`).addClass('is-show');\n\t\tscrollPosition = $(window).scrollTop();\n\t}\n\n\t$('body').on('click','.js-popup-link',function(e){\n\t\te.preventDefault();\n\t\tlet $this = $(this);\n\t\tlet target = $this.attr('data-link');\n\t\tlet href = $this.attr('data-href');\n\t\tlet videoSrc = $this.attr('data-src');\n\n\t\topenPopup(target, href, videoSrc);\n\n\t\treturn false;\n\t});\n\n\tfunction openPopup(target, href, videoSrc) {\n\t\tconst $elem = $('.js-popup[data-block=\"'+target+'\"]');\n\t\t$popup.removeClass('is-show');\n\t\t$elem.addClass('is-show');\n\n\t\tscrollPosition = $(window).scrollTop();\n\n\t\tlet video = $elem.find('.js-iframe');\n\t\tvideo.attr('src',videoSrc);\n\n\t\tif (target !== 'media') {\n\t\t\tlocation.hash = target;\n\t\t}\n\n\t\tscrollPosition = $(window).scrollTop();\n\n\t\tif (href) {\n      \t\thistory.pushState({}, '', href);\n\t\t\t$('.js-popup[data-block=\"'+target+'\"]').find('.js-ajax-wrapper').empty();\n\t\t\tgetEventItem(href,$('.js-popup[data-block=\"'+target+'\"]'));\n\t\t\tlastOpenedPopup = 'href';\n\t\t}\n\t}\n\n\twindow.openPopup = openPopup;\n\n\t$popupCloseBtn.on('click',function(){\n\t\tlet $this = $(this);\n\t\tlet $popup = $this.closest('.js-popup');\n\n\t\t$popup.removeClass('is-show');\n\t\t$popup.find('.js-iframe').attr('src','');\n\t\tlocation.hash = '';\n\t\tif (scrollPosition !== \"undefined\") {\n\t\t\t$(window).scrollTop(scrollPosition);\n\t\t\tscrollPosition = undefined;\n\t\t}\n\n\t\tif (lastOpenedPopup === 'href') {\n\t\t\tlocation.hash = '';\n\t\t\thistory.back();\n\t\t\tlastOpenedPopup = null;\n\t\t}\n\n\t});\n\n\tfunction getEventItem(item,elem) {\n\t\t$.ajax({\n\t\t\turl: item,\n\t\t\ttype: \"GET\",\n\t\t\tsuccess: function(data) {\n\t\t\t\tif ($(data).length !== 0) {\n\t\t\t\t\telem.find('.js-ajax-wrapper').html($(data).hide().fadeIn(1000));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n});\n"],"names":["window","numberWithCommas","x","toString","replace","$","$input","focus","this","parent","addClass","removeClass","blur","val","each","$select","$selectInput","$selectFilter","select2","tooltipster","click","prev","find","currentValue","parseInt","attr","text","next","mask","data","Inputmask","keypress","e","charCode","which","keyCode","change","$this","btn","closest","is","removeAttr","thisForm","validate","element","form","event","preventDefault","FormData","formParams","serializeArray","i","tag","files","file","append","name","value","prop","reset","$select2","length","trigger","ajax","action","log","xhr","ajaxOptions","thrownError","status","on","$popup","$popupCloseBtn","lastOpenedPopup","scrollPosition","openPopup","target","href","videoSrc","item","elem","$elem","scrollTop","hash","pushState","empty","html","hide","fadeIn","location","substr","undefined","back"],"mappings":"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"}